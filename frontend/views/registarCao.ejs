<link rel="stylesheet" href="/css/registarCao/registarCao.css" />

<%- include("partials/headerRegistarCao") %>

<div class="onda-mockup"></div>

<form 
  action="<%= cao.id_cao ? `/registarCao/${cao.id_cao}?_method=PUT` : '/registarCao' %>"
  method="POST"
  enctype="multipart/form-data"
>
<input type="hidden" id="nomeCaoHidden" name="nomeCao" value="<%= cao.value %>">
<div class="imagens-container">
  <h1>Imagens</h1>
  <div class="imagens">
    <% cao.fotos.forEach((imagem, index) => { %>
      <div class="<%= imagem.path_fotos ? 'imagem-foto' : 'imagem-empty' %>">
        <input 
          type="file" 
          name="fotos"
          accept="image/*"
          style="display:none"
          data-index="<%= index %>"
        >
        <% if (imagem.path_fotos) { %>
          <img src="/uploads/caes/fotos/<%= imagem.path_fotos %>" data-index="<%= index %>" />
        <% } else { %>
          <img src="/images/camera.png" data-index="<%= index %>" />
        <% } %>
      </div>
    <% }) %>
  </div>
</div>

<div class="input-item">
  <label for="nome" class="titulo">Nome do Animal:</label>
  <input 
    name="nome"
    type="text" 
    class="resposta"
    value="<%= cao.nome %>"
  />
</div>

<div class="input-item">
  <label for="idade" class="titulo">Idade (Meses):</label>
  <input 
    name="idade"
    type="number" 
    class="resposta"
    value="<%= cao.idade %>"
  />
</div>

<div class="input-item">
  <label for="sexo" class="titulo">Sexo:</label>
  <select name="sexo" class="resposta">
    <option value="padrão" <%= !cao.sexo ? 'selected' : '' %>>Por definir</option>
    <option value="Macho" <%= cao.sexo === 'Macho' ? 'selected' : '' %>>Macho</option>
    <option value="Fêmea" <%= cao.sexo === 'Fêmea' ? 'selected' : '' %>>Fêmea</option>
  </select>
</div>

<div class="input-item">
  <label for="porte" class="titulo">Porte:</label>
  <select name="porte" class="resposta">
    <option value="padrão" <%= !cao.porte ? 'selected' : '' %>>Por definir</option>
    <option value="Pequeno" <%= cao.porte === 'Pequeno' ? 'selected' : '' %>>Pequeno</option>
    <option value="Médio" <%= cao.porte === 'Médio' ? 'selected' : '' %>>Médio</option>
    <option value="Grande" <%= cao.porte === 'Grande' ? 'selected' : '' %>>Grande</option>
  </select>
</div>

<div class="input-item">
  <label for="info_medica" class="titulo">Informações Médicas:</label>
  <textarea
    name="info_medica"
    rows="7"
    placeholder="Informações Médicas pertinentes"
    class="resposta"
    class="info-medicas"
  ><%= cao.info_medica %></textarea>
</div>

<div class="input-item">
  <label for="info_pessoal" class="titulo">Descrição do Animal:</label>
  <textarea
    name="info_pessoal"
    rows="10"
    placeholder="Descrição da personalidade do Animal"
    class="resposta"
    class="info-pessoais"
  ><%= cao.info_pessoal %></textarea>
</div>

<div class="botoes-acao <%= cao.id_cao ? 'editar' : 'adicionar' %>">
  <% if (cao.id_cao) { %>
  <div class="checkbox-adotado">
    <input
      type="checkbox"
      name="status"
      class="checkbox-adotado-input"
      <%= cao.status ? 'checked' : '' %>
    />
    <label for="adotado">Adotado</label>
  </div>
 
  <div class="botoes-acao-direita">
    <button type="submit" class="botao-guardar">Guardar</button>
 
    <button
      type="button"
      class="botao-apagar"
      onclick="if(confirm('Tem certeza que deseja apagar?')) document.getElementById('deleteForm').submit()"
    >
      Apagar
    </button>
  </div>
  <% } else { %>
  <button type="submit" class="botao-adicionar">Adicionar</button>
  <% } %>
</div>
</form>
<form
  id="deleteForm"
  action="/registarCao/<%= cao.id_cao %>?_method=DELETE"
  method="POST"
>
</form>
<div class="onda-fim"></div>
 
<%- include("partials/footer") %>

<script src="/js/registarCao/registarCao.js"></script>
